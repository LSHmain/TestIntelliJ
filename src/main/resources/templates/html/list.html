<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <meta charset="UTF-8">
    <title>전체 조회</title>
</head>
<body>
<script>
    var message = /*[[${message}]]*/"";
    if(message !=="" && message != null){
        alert(message);
    }
</script>
<!-- 조건추가 -->
<form th:action="@{/board/listPaging.do}" method="get" id="searchForm">
    <div class="input-group">
<!--        <input type="hidden" name="page" th:value="${pageRequestDTO.page}">-->
        <input type="hidden" name="size" th:value="${pageRequestDTO.size}">
        <div class="input-group-prepend">
            <select class="custom-select" name="type">
                <option value="t" th:selected="${pageRequestDTO.type=='t'}">제목</option>
                <option value="c" th:selected="${pageRequestDTO.type=='c'}">내용</option>
                <option value="w" th:selected="${pageRequestDTO.type=='w'}">작성자</option>
                <option value="tc" th:selected="${pageRequestDTO.type=='tc'}">제목+내용</option>
                <option value="tcw" th:selected="${pageRequestDTO.type=='tcw'}">제목+내용+작성자</option>
            </select>
            <input class="form-control" name="keyword" th:value="${pageRequestDTO.keyword}"/>
        </div >
        <div class="input-group-prepend" id="button-addon4">
            <button type="submit" class="btn btn-outline-secondary btn-search">Search</button>
            <button type="reset" class="btn btn-outline-secondary btn-clear">Clear</button>
        </div>
    </div>
</form>
<a th:href="@{/board/insert.do}" class="btn btn-outline-primary">입력</a>
<table class="table table-striped">
    <thead>
    <tr>
        <th>번호</th>
        <th>제목</th>
        <th>작성자</th>
        <th>내용</th>
        <th>등록일</th>
        <th>수정일</th>
<!--        <th>댓글</th>-->
<!--        <th>댓글수</th>-->
    </tr>
    </thead>
    <tbody>
    <tr th:each="board:${boards.dtoList}">
    <td><a th:href="@{/board/{bno}(bno=${board.bno})}">[[${board.bno}]]</a></td>
    <td>[[${board.title}]]</td>
    <td>[[${board.writer}]]</td>
    <td>[[${board.content}]]</td>
    <td>[[${board.regDate}]]</td>
    <td>[[${board.modDate}]]</td>
<!--    <td>[[board.webReplyEntities]]</td>-->
<!--    <td>[[board.replyCount]]</td>-->
    </tr>
    </tbody>
</table>
<!--    혼자 submit으로 변경해서 작동되게 한 버전-->
<!--<div style="margin: 0 auto" th:each="page:${boards.pageList}">-->
<!--    <button style="float:left" name="page" type="submit" th:text="${page}" th:value="${page}" />-->
<!--</div>-->

    <ul class="pagination h-100 justify-content-center align-items-center">
        <li class="page-item" th:if="${boards.prev}">
            <a
                    class="page-link"
                    th:href="@{/board/listPaging.do(page=${boards.start -1},
size=${pageRequestDTO.size},
type=${pageRequestDTO.type},keyword=${pageRequestDTO.keyword})}" tabindex="-1">Previos
            </a>
        </li>
        <li class=" 'page-item ' + ${boardresult.page==page?'active':''}"
            th:each="page:${boards.pageList}">
            <a class="page-link"
               th:href="@{/board/listPaging.do(page=${page},size=${pageRequestDTO.size},
type=${pageRequestDTO.type},keyword=${pageRequestDTO.keyword})}" tabindex="-1">
                [[${page}]]페이지
            </a>
        </li>
        <li class="page-item" th:if="${boards.next}">
            <a
                    class="page-link"
                    th:href="@{/board/listPaging.do(page=${boards.end +1},size=${pageRequestDTO.size},
type=${pageRequestDTO.type},keyword=${pageRequestDTO.keyword})}">Next
            </a>
        </li>
    </ul>
</body>
</html>