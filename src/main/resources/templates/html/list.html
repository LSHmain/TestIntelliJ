<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>전체 조회</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <style>
        body {
            padding: 2rem;
            background-color: #f9f9f9;
        }

        .form-control, .custom-select {
            max-width: 300px;
        }

        .input-group {
            margin-bottom: 1.5rem;
        }

        .btn-search {
            margin-left: 10px;
        }

        .btn-clear {
            margin-left: 5px;
        }

        .btn-outline-primary {
            margin-bottom: 1rem;
        }

        table {
            background-color: white;
            border-radius: 10px;
            overflow: hidden;
        }

        th {
            background-color: #007bff;
            color: white;
            text-align: center;
        }

        td {
            vertical-align: middle;
        }

        td a {
            text-decoration: none;
            color: #007bff;
            font-weight: bold;
        }

        .pagination {
            margin-top: 2rem;
        }

        .page-link {
            color: #007bff;
        }

        .page-item.active .page-link {
            background-color: #007bff;
            border-color: #007bff;
            color: white;
        }
    </style>
</head>
<body>

<script>
    var message = /*[[${message}]]*/"";
    if (message !== "" && message != null) {
        alert(message);
    }
</script>

<!-- 검색 폼 -->
<form th:action="@{/board/listPaging.do}" method="get" id="searchForm">
    <div class="input-group">
        <input type="hidden" name="size" th:value="${pageRequestDTO.size}">
        <select class="custom-select" name="type">
            <option value="t" th:selected="${pageRequestDTO.type=='t'}">제목</option>
            <option value="c" th:selected="${pageRequestDTO.type=='c'}">내용</option>
            <option value="w" th:selected="${pageRequestDTO.type=='w'}">작성자</option>
            <option value="tc" th:selected="${pageRequestDTO.type=='tc'}">제목+내용</option>
            <option value="tcw" th:selected="${pageRequestDTO.type=='tcw'}">제목+내용+작성자</option>
        </select>
        <input class="form-control" name="keyword" th:value="${pageRequestDTO.keyword}" placeholder="검색어를 입력하세요" />
        <button type="submit" class="btn btn-outline-secondary btn-search">Search</button>
        <button type="reset" class="btn btn-outline-secondary btn-clear">Clear</button>
    </div>
</form>

<!-- 입력 버튼 -->
<a th:href="@{/board/insert.do}" class="btn btn-outline-primary">입력</a>

<!-- 게시판 테이블 -->
<table class="table table-striped table-bordered text-center">
    <thead>
    <tr>
        <th>번호</th>
        <th>제목</th>
        <th>작성자</th>
        <th>내용</th>
        <th>등록일</th>
        <th>수정일</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="board:${boards.dtoList}">
        <td><a th:href="@{/board/{bno}(bno=${board.bno})}">[[${board.bno}]]</a></td>
        <td>[[${board.title}]]</td>
        <td>[[${board.writer}]]</td>
        <td>[[${board.content}]]</td>
        <td>[[${board.regDate}]]</td>
        <td>[[${board.modDate}]]</td>
    </tr>
    </tbody>
</table>

<!-- 페이지네이션 -->
<ul class="pagination justify-content-center">
    <li class="page-item" th:if="${boards.prev}">
        <a class="page-link" th:href="@{/board/listPaging.do(page=${boards.start -1}, size=${pageRequestDTO.size}, type=${pageRequestDTO.type}, keyword=${pageRequestDTO.keyword})}">Previous</a>
    </li>
    <li class="page-item" th:each="page:${boards.pageList}" th:classappend="${page == pageRequestDTO.page} ? 'active'">
        <a class="page-link" th:href="@{/board/listPaging.do(page=${page}, size=${pageRequestDTO.size}, type=${pageRequestDTO.type}, keyword=${pageRequestDTO.keyword})}">
            [[${page}]]
        </a>
    </li>
    <li class="page-item" th:if="${boards.next}">
        <a class="page-link" th:href="@{/board/listPaging.do(page=${boards.end +1}, size=${pageRequestDTO.size}, type=${pageRequestDTO.type}, keyword=${pageRequestDTO.keyword})}">Next</a>
    </li>
</ul>

</body>
</html>
